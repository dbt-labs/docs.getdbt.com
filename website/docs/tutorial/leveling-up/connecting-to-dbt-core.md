---
title: "Connect to dbt Core using the CLI"
id: connecting-to-dbt-core
description: "Connecting your warehouse to dbt Core using the command line interface."
sidebar_label: "Connect to dbt Core using the CLI"
---

When you use dbt Core to work with dbt, you will be editing files locally using a code editor, and running projects using the dbt command line interface (dbt CLI). If you'd rather edit files and run projects using the web-based Integrated Development Environment (IDE), you should refer to [Getting set up in dbt Cloud](/tutorial/getting-set-up).

## Prerequisites

* To use the dbt CLI, it's important that you know some basics of your terminal. In particular, you should understand `cd`, `ls` and `pwd` to navigate through the directory structure of your computer easily.
* Install dbt Core using the [installation instructions](/dbt-cli/install/overview) for your operating system.
* Complete [Setting up (in BigQuery)](/tutorial/getting-set-up/setting-up-bigquery#setting-up) and [Loading data (BigQuery)](/tutorial/getting-set-up/setting-up-bigquery#loading-data).

## Create a project

You should have successfully run the sample query in BigQuery. You will now learn how to create a starter project with example models, before building your own models.

### Create a repository

We're going to use [GitHub](https://github.com/) as our git provider for this tutorial, but you can use any git provider. If you don't yet have a GitHub account, [create one now](https://github.com/join).
<LoomVideo id="afe148aeab5e4279a2ca310251ea20a6" />

1. Create a new GitHub repository [here](https://github.com/new) named `dbt-tutorial`.
2. Click **Create repository** (without `.gitignore` and without a license).

<Lightbox src="/img/create-github-repo.png" title="Create a GitHub repo" />

### Create a project

<LoomVideo id="f36152340ccc41e8be517eb295c4d6f1" />

The dbt CLI comes with a command to help you scaffold a dbt project. To create your dbt project:

1. Ensure dbt is installed by running `dbt --version`:

```shell-session
dbt --version
```

:::info

dbt should have been installed as part of the  [Getting set up](/tutorial/getting-set-up) part of the tutorial. If it was not installed, please follow the [installation instructions](dbt-cli/install/overview).

:::

2. Run the `init` command:

```shell-session
dbt init jaffle_shop
```

3. `cd` into your project:

```shell-session
cd jaffle_shop
```

You can use `pwd` to confirm that you are in the right spot.

3. Open your project (i.e. the directory you just created) in a code editor like Atom or VSCode. You should see a directory structure with `.sql` and `.yml` files that were generated by the `init` command.

<Lightbox src="/img/starter-project-dbt-cli.png" title="The starter project in a code editor" />

4. Update the following values in the `dbt_project.yml` file:

<File name='dbt_project.yml'>

```yaml
name: jaffle_shop # this normally says my_new_project

...

profile: jaffle_shop # this normally says default

...

models:
  jaffle_shop: #this normally says my_new_project. It should match the value for `name:`
    ...
```

</File>

### Connect to BigQuery

When developing locally, dbt connects to your data warehouse using a [profile](/dbt-cli/configure-your-profile) — a yaml file with all the connection details to your warehouse.

1. Create a file in the `~/.dbt/` directory named `profiles.yml`.
2. Move your BigQuery keyfile into this directory.
3. Copy the following into the file — make sure you update the values where indicated.

<File name='profiles.yml'>

```yaml
jaffle_shop: # this needs to match the profile: in your dbt_project.yml file
  target: dev
  outputs:
    dev:
      type: bigquery
      method: service-account
      keyfile: /Users/claire/.dbt/dbt-user-creds.json # replace this with the full path to your keyfile
      project: grand-highway-265418 # Replace this with your project id
      dataset: dbt_alice # Replace this with dbt_your_name, e.g. dbt_bob
      threads: 1
      timeout_seconds: 300
      location: US
      priority: interactive
```

</File>

4. Execute the debug command from your project to confirm that you can successfully connect

```shell-session
dbt debug
```

Confirm that the last line of the output is `Connection test: OK connection ok`.

<Lightbox src="/img/successful-dbt-debug.png" title="A successful dbt debug command" />

#### FAQs

<FAQ src="sample-profiles" alt_header="My data team uses a different data warehouse. What should my profiles.yml file look like for my warehouse?"/>
<FAQ src="separate-profile" />
<FAQ src="profile-name" />
<FAQ src="target-names" />
<FAQ src="profile-env-vars" />

### Perform your first dbt run

Our sample project has some example models in it. We're going to check that we can run them to confirm everything is in order.

1. Execute the `run` command to build the example models:

```shell-session
dbt run
```

You should have an ouput that looks like this:

<Lightbox src="/img/successful-dbt-run.png" title="A successful dbt run command" />

### Commit your changes

We need to commit our changes so that our repository has up-to-date code.
<LoomVideo id="a39753e4ce5647b2be4e5331788bab91" />

1. Link the GitHub repository you created to your dbt project by running the following commands. Make sure you use the correct git URL for your repository.

```shell-session
git init
git branch -M main
git add .
git commit -m "Create a dbt project"
git remote add origin https://github.com/USERNAME/dbt-tutorial.git
git push -u origin main
```

:::info
If this is your first time using git, it's worth taking some time to understand the basics.
:::

## Build your first models

Now that you set up your sample project, you can get to the fun part — [building models](building-models)! You will take a sample query and turn it into a model in your dbt project.

### Checkout a new git branch

It's a good idea to check out a new git branch when working on new code.

1. Run `git checkout -b add-customers-model` to create a new branch.

<Lightbox src="/img/checkout-branch-dbt-cli.png" title="Checkout a new branch" />

### Build your first model

<LoomVideo id="2ae3e1c6dfab451ab165ce928c5600c0" />

1. Open your project in a code editor
2. Create a new SQL file in the `models` directory, named `models/customers.sql`.
3. Paste the query from the [Setting up](/tutorial/getting-set-up) instructions into the file.
4. From the command line, execute `dbt run`. Your output should look like this:

<Lightbox src="/img/first-model-dbt-cli.png" title="A successful run with the dbt CLI" />

If you switch back to the BigQuery console you'll be able to `select` from this model.

#### FAQs

<FAQ src="checking-logs" />
<FAQ src="which-schema" />
<FAQ src="create-a-schema" />
<FAQ src="run-downtime" />
<FAQ src="sql-errors" />

### Change the way your model is materialized

One of the most powerful features of dbt is that you can change the way a model is materialized in your warehouse, simply by changing a configuration value. Let's see this in action.

<LoomVideo id="22ebdc914426461ea5c617a415cb4c21" />

<Snippet src="tutorial-change-way-model-materialized" />

### Delete the example models

<Snippet src="tutorial-delete-example-models" />

<LoomVideo id="db63e6e937594b38bf044c78e720d95d" />

### Build models on top of other models

<Snippet src="tutorial-build-models-atop-other-models" />

<LoomVideo id="39eceeedf69641b5aca6f94c4da172a8" />

### Next steps

<Snippet src="tutorial-next-steps-1st-model" />

<LoomVideo id="2fc44590f2614a68bea402322c36f56e" />

## Test and document your project

### Add tests to your models

<Snippet src="tutorial-add-tests-to-models" />

<LoomVideo id="61693e928ec94100bef33371aab8296a" />


### Document your models

<Snippet src="tutorial-document-your-models" />

<LoomVideo id="230b30756f674bf7ba38311099070d37" />

#### Next steps


<Snippet src="tutorial-next-steps-tests" />

<LoomVideo id="6db6956adbb04f55b6027c461e9b1792" />

### Commit your changes

You need to commit the changes you made to the project so that the repository has your latest code.

1. Add all your changes to git: `git add -A`
2. Commit your changes: `git commit -m "Add customers model, tests, docs"`
3. Push your changes to your repository: `git push`
4. Navigate to your repository, and open a pull request to merge the code into your master branch.

<LoomVideo id="b07d7efe3f054e3bb357b4bccd805e70" />

## Schedule a job

We recommend using dbt Cloud to schedule a job. If you do want to use dbt Core to schedule a job, you can refer to the [dbt airflow](/blog/dbt-airflow-spiritual-alignment) blog post.


TODO @coapacetic any other helpful links here?
